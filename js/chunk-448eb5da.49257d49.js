(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-448eb5da"],{"159b":function(t,e,c){var n=c("da84"),r=c("fdbc"),o=c("785a"),i=c("17c2"),a=c("9112"),s=function(t){if(t&&t.forEach!==i)try{a(t,"forEach",i)}catch(e){t.forEach=i}};for(var u in r)r[u]&&s(n[u]&&n[u].prototype);s(o)},"17c2":function(t,e,c){"use strict";var n=c("b727").forEach,r=c("a640"),o=r("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},2532:function(t,e,c){"use strict";var n=c("23e7"),r=c("e330"),o=c("5a34"),i=c("1d80"),a=c("577e"),s=c("ab13"),u=r("".indexOf);n({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~u(a(i(this)),a(o(t)),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,c){var n=c("861d"),r=c("c6b6"),o=c("b622"),i=o("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==r(t))}},"5a34":function(t,e,c){var n=c("da84"),r=c("44e7"),o=n.TypeError;t.exports=function(t){if(r(t))throw o("The method doesn't accept regular expressions");return t}},"99af":function(t,e,c){"use strict";var n=c("23e7"),r=c("da84"),o=c("d039"),i=c("e8b5"),a=c("861d"),s=c("7b0b"),u=c("07fa"),l=c("8418"),d=c("65f0"),b=c("1dde"),h=c("b622"),j=c("2d00"),O=h("isConcatSpreadable"),v=9007199254740991,f="Maximum allowed index exceeded",g=r.TypeError,p=j>=51||!o((function(){var t=[];return t[O]=!1,t.concat()[0]!==t})),m=b("concat"),y=function(t){if(!a(t))return!1;var e=t[O];return void 0!==e?!!e:i(t)},w=!p||!m;n({target:"Array",proto:!0,forced:w},{concat:function(t){var e,c,n,r,o,i=s(this),a=d(i,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?i:arguments[e],y(o)){if(r=u(o),b+r>v)throw g(f);for(c=0;c<r;c++,b++)c in o&&l(a,b,o[c])}else{if(b>=v)throw g(f);l(a,b++,o)}return a.length=b,a}})},ab13:function(t,e,c){var n=c("b622"),r=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(c){try{return e[r]=!1,"/./"[t](e)}catch(n){}}return!1}},b727:function(t,e,c){var n=c("0366"),r=c("e330"),o=c("44ad"),i=c("7b0b"),a=c("07fa"),s=c("65f0"),u=r([].push),l=function(t){var e=1==t,c=2==t,r=3==t,l=4==t,d=6==t,b=7==t,h=5==t||d;return function(j,O,v,f){for(var g,p,m=i(j),y=o(m),w=n(O,v),k=a(y),C=0,F=f||s,x=e?F(j,k):c||b?F(j,0):void 0;k>C;C++)if((h||C in y)&&(g=y[C],p=w(g,C,m),t))if(e)x[C]=p;else if(p)switch(t){case 3:return!0;case 5:return g;case 6:return C;case 2:u(x,g)}else switch(t){case 4:return!1;case 7:u(x,g)}return d?-1:r||l?l:x}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},c740:function(t,e,c){"use strict";var n=c("23e7"),r=c("b727").findIndex,o=c("44d2"),i="findIndex",a=!0;i in[]&&Array(1)[i]((function(){a=!1})),n({target:"Array",proto:!0,forced:a},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},caad:function(t,e,c){"use strict";var n=c("23e7"),r=c("4d64").includes,o=c("44d2");n({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},d645:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),r={class:"container mt-5"},o={class:"row mb-5"},i={class:"col-md-2 mt-3"},a=Object(n["h"])("div",{class:"col-md-1"},null,-1),s={class:"col-md-9"},u={class:"row g-3 px-2"};function l(t,e,c,l,d,b){var h=Object(n["J"])("Loading"),j=Object(n["J"])("ProductsMenu"),O=Object(n["J"])("Card");return Object(n["B"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(h,{active:d.isLoading,"z-index":1060},null,8,["active"]),Object(n["h"])("div",r,[Object(n["h"])("div",o,[Object(n["h"])("div",i,[Object(n["k"])(j,{nowCategory:d.nowCategory,onGetProducts:b.getProducts,onGoToFavorite:b.goToFavorite},null,8,["nowCategory","onGetProducts","onGoToFavorite"])]),a,Object(n["h"])("div",s,[Object(n["h"])("div",u,[(Object(n["B"])(!0),Object(n["g"])(n["a"],null,Object(n["H"])(d.products,(function(t){return Object(n["B"])(),Object(n["e"])(O,{key:t.id+"card",product:t,userFavorite:d.userFavorite,onToggleFavorite:b.toggleFavorite},null,8,["product","userFavorite","onToggleFavorite"])})),128))])])])])],64)}c("99af"),c("c740"),c("a434"),c("d3b7"),c("159b"),c("e9c4"),c("caad"),c("2532");var d={class:"card-item d-flex flex-column align-items-center col-lg-3 col-md-4 col-6"},b={class:"card-upper"},h=["src","alt"],j={key:0,class:"card-tag"},O={key:0,class:"bi bi-heart-fill"},v={key:1,class:"bi bi-heart"},f={key:1,class:"card-detail pt-4"},g=Object(n["j"])(" 詳細"),p=Object(n["h"])("span",{class:"d-xl-inline-flex d-none"},"商品",-1),m=Object(n["j"])("資訊 "),y=Object(n["h"])("i",{class:"bi bi-arrow-right"},null,-1),w={key:2,class:"card-soldout"},k=Object(n["h"])("h5",{class:"card-soldouttag"},"SOLD OUT",-1),C=[k],F={class:"card-info"},x={class:"card-title"},P={key:0,class:"bi bi-hand-thumbs-up-fill me-1"},X={class:"card-pricetag"},B={key:0,class:"card-orgprice ml-2"};function T(t,e,c,r,o,i){var a=Object(n["J"])("router-link");return Object(n["B"])(),Object(n["g"])("div",d,[Object(n["h"])("div",b,[Object(n["h"])("img",{class:"card-img",src:c.product.imageUrl,alt:c.product.title},null,8,h),c.product.price!==c.product.origin_price?(Object(n["B"])(),Object(n["g"])("p",j," ON SALE ")):Object(n["f"])("",!0),Object(n["h"])("a",{class:"card-favicon",onClick:e[0]||(e[0]=Object(n["X"])((function(t){return i.toggleFavorite(c.product)}),["prevent"])),href:""},[c.userFavorite.includes(c.product.id)?(Object(n["B"])(),Object(n["g"])("i",O)):(Object(n["B"])(),Object(n["g"])("i",v))]),c.product.stock>0?(Object(n["B"])(),Object(n["g"])("div",f,[Object(n["k"])(a,{to:"/product/".concat(c.product.id),class:"card-linkstyle"},{default:Object(n["V"])((function(){return[g,p,m,y]})),_:1},8,["to"])])):Object(n["f"])("",!0),c.product.stock<=0||""===c.product.stock?(Object(n["B"])(),Object(n["g"])("div",w,C)):Object(n["f"])("",!0)]),Object(n["h"])("div",F,[Object(n["h"])("h6",x,[c.product.recommended?(Object(n["B"])(),Object(n["g"])("i",P)):Object(n["f"])("",!0),Object(n["j"])(Object(n["M"])(c.product.title),1)]),Object(n["h"])("p",X,[Object(n["j"])("NT$ "+Object(n["M"])(c.product.price)+" ",1),c.product.price!==c.product.origin_price?(Object(n["B"])(),Object(n["g"])("span",B,"$ "+Object(n["M"])(c.product.origin_price),1)):Object(n["f"])("",!0)])])])}var E={props:{product:Object,userFavorite:{type:Array,default:function(){return[]}}},methods:{toggleFavorite:function(t){this.$emit("toggle-favorite",t)}}},L=c("6b0d"),S=c.n(L);const $=S()(E,[["render",T]]);var J=$,A=Object(n["h"])("h4",{class:"fs-4 fw-bold pb-2 d-md-block d-none"},"商品分類",-1),M={class:"fs-4 fw-bold pb-4 text-center d-md-none"},D={key:0},I={class:"d-flex flex-column d-xl-block justify-content-md-center d-md-block d-none"},N={class:"menu-listitem"},G=Object(n["h"])("div",null,"全部商品",-1),_={class:"menu-listitem d-block"},R=Object(n["h"])("div",null,"我的收藏",-1),U=Object(n["h"])("hr",{class:"w-75"},null,-1),q={class:"menu-listitem d-block"},z=Object(n["h"])("div",null,"乳酪蛋糕",-1),H={class:"menu-listitem"},V=Object(n["h"])("div",null,"鮮奶油蛋糕",-1),K={class:"menu-listitem"},Q=Object(n["h"])("div",null,"磅蛋糕",-1),W=Object(n["h"])("hr",{class:"w-75"},null,-1),Y={class:"menu-listitem"},Z=Object(n["h"])("div",null,"手作餅乾",-1),tt={class:"menu-listitem"},et=Object(n["h"])("div",null,"法式塔",-1),ct={class:"menu-listitem"},nt=Object(n["h"])("div",null,"英式司康",-1),rt={class:"menu-listitem"},ot=Object(n["h"])("div",null,"提拉米蘇",-1),it=Object(n["h"])("hr",{class:"w-75"},null,-1),at={class:"menu-listitem"},st=Object(n["h"])("div",null,"優惠組合",-1),ut={class:"menu-listitem"},lt=Object(n["h"])("div",null,"加購商品",-1),dt={class:"dropdown mx-5 mb-4 d-md-none"},bt=Object(n["h"])("button",{class:"btn btn-secondary dropdown-toggle w-100",type:"button",id:"dropdownMenuButton2","data-bs-toggle":"dropdown","aria-expanded":"false"}," 選擇商品分類 ",-1),ht={class:"dropdown-menu dropdown-menu-dark w-100","aria-labelledby":"dropdownMenuButton2"},jt=Object(n["h"])("li",null,[Object(n["h"])("hr",{class:"dropdown-divider"})],-1),Ot=Object(n["h"])("li",null,[Object(n["h"])("hr",{class:"dropdown-divider"})],-1),vt=Object(n["h"])("li",null,[Object(n["h"])("hr",{class:"dropdown-divider"})],-1);function ft(t,e,c,r,o,i){return Object(n["B"])(),Object(n["g"])(n["a"],null,[A,Object(n["h"])("h4",M,[Object(n["j"])(Object(n["M"])(c.nowCategory)+" ",1),""===c.nowCategory?(Object(n["B"])(),Object(n["g"])("span",D,"全部商品")):Object(n["f"])("",!0)]),Object(n["h"])("ul",I,[Object(n["h"])("li",N,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[0]||(e[0]=Object(n["X"])((function(t){return i.getProducts("")}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":""===c.nowCategory}])},null,2),G])]),Object(n["h"])("li",_,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[1]||(e[1]=Object(n["X"])((function(){return i.goToFavorite&&i.goToFavorite.apply(i,arguments)}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":"favorite"===c.nowCategory}])},null,2),R])]),U,Object(n["h"])("li",q,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[2]||(e[2]=Object(n["X"])((function(t){return i.getProducts("乳酪蛋糕")}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":"乳酪蛋糕"===c.nowCategory}])},null,2),z])]),Object(n["h"])("li",H,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[3]||(e[3]=Object(n["X"])((function(t){return i.getProducts("鮮奶油蛋糕")}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":"鮮奶油蛋糕"===c.nowCategory}])},null,2),V])]),Object(n["h"])("li",K,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[4]||(e[4]=Object(n["X"])((function(t){return i.getProducts("磅蛋糕")}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":"磅蛋糕"===c.nowCategory}])},null,2),Q])]),W,Object(n["h"])("li",Y,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[5]||(e[5]=Object(n["X"])((function(t){return i.getProducts("手作餅乾")}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":"手作餅乾"===c.nowCategory}])},null,2),Z])]),Object(n["h"])("li",tt,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[6]||(e[6]=Object(n["X"])((function(t){return i.getProducts("法式塔")}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":"法式塔"===c.nowCategory}])},null,2),et])]),Object(n["h"])("li",ct,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[7]||(e[7]=Object(n["X"])((function(t){return i.getProducts("英式司康")}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":"英式司康"===c.nowCategory}])},null,2),nt])]),Object(n["h"])("li",rt,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[8]||(e[8]=Object(n["X"])((function(t){return i.getProducts("提拉米蘇")}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":"提拉米蘇"===c.nowCategory}])},null,2),ot])]),it,Object(n["h"])("li",at,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[9]||(e[9]=Object(n["X"])((function(t){return i.getProducts("客製甜點")}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":"客製甜點"===c.nowCategory}])},null,2),st])]),Object(n["h"])("li",ut,[Object(n["h"])("a",{class:"menu-link my-2",href:"#",onClick:e[10]||(e[10]=Object(n["X"])((function(t){return i.getProducts("加購商品")}),["prevent"]))},[Object(n["h"])("div",{class:Object(n["s"])(["menu-bar rounded",{"menu-bar-active":"加購商品"===c.nowCategory}])},null,2),lt])])]),Object(n["h"])("div",dt,[bt,Object(n["h"])("ul",ht,[Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:""===c.nowCategory}]),href:"#",onClick:e[11]||(e[11]=Object(n["X"])((function(t){return i.getProducts("")}),["prevent"]))}," 全部商品 ",2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:"favorite"===c.nowCategory}]),href:"#",onClick:e[12]||(e[12]=Object(n["X"])((function(){return i.goToFavorite&&i.goToFavorite.apply(i,arguments)}),["prevent"]))}," 我的收藏 ",2)]),jt,Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:"乳酪蛋糕"===c.nowCategory}]),href:"#",onClick:e[13]||(e[13]=Object(n["X"])((function(t){return i.getProducts("乳酪蛋糕")}),["prevent"]))}," 乳酪蛋糕 ",2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:"鮮奶油蛋糕"===c.nowCategory}]),href:"#",onClick:e[14]||(e[14]=Object(n["X"])((function(t){return i.getProducts("鮮奶油蛋糕")}),["prevent"]))}," 鮮奶油蛋糕 ",2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:"磅蛋糕"===c.nowCategory}]),href:"#",onClick:e[15]||(e[15]=Object(n["X"])((function(t){return i.getProducts("磅蛋糕")}),["prevent"]))}," 磅蛋糕 ",2)]),Ot,Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:"手作餅乾"===c.nowCategory}]),href:"#",onClick:e[16]||(e[16]=Object(n["X"])((function(t){return i.getProducts("手作餅乾")}),["prevent"]))}," 手作餅乾 ",2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:"法式塔"===c.nowCategory}]),href:"#",onClick:e[17]||(e[17]=Object(n["X"])((function(t){return i.getProducts("法式塔")}),["prevent"]))}," 法式塔 ",2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:"英式司康"===c.nowCategory}]),href:"#",onClick:e[18]||(e[18]=Object(n["X"])((function(t){return i.getProducts("英式司康")}),["prevent"]))}," 英式司康 ",2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:"提拉米蘇"===c.nowCategory}]),href:"#",onClick:e[19]||(e[19]=Object(n["X"])((function(t){return i.getProducts("提拉米蘇")}),["prevent"]))}," 提拉米蘇 ",2)]),vt,Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:"優惠商品"===c.nowCategory}]),href:"#",onClick:e[20]||(e[20]=Object(n["X"])((function(t){return i.getProducts("優惠商品")}),["prevent"]))}," 優惠商品 ",2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:Object(n["s"])(["dropdown-item text-center",{active:"加購商品"===c.nowCategory}]),href:"#",onClick:e[21]||(e[21]=Object(n["X"])((function(t){return i.getProducts("加購商品")}),["prevent"]))}," 加購商品 ",2)])])])],64)}var gt={props:["nowCategory"],data:function(){},methods:{getProducts:function(t){this.$emit("get-products",t)},goToFavorite:function(){this.$emit("go-to-favorite")}}};const pt=S()(gt,[["render",ft]]);var mt=pt,yt={components:{Card:J,ProductsMenu:mt},data:function(){return{products:[],isLoading:!1,userFavorite:JSON.parse(localStorage.getItem("userFavorite"))||[],favoriteProductList:[],inFavoritePage:!1,nowCategory:""}},inject:["emitter"],methods:{getProducts:function(t){var e=this;this.isLoading=!0,this.inFavoritePage=!1,t?this.$http("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chinghsin-api","/products?category=").concat(t)).then((function(c){e.products=c.data.products,e.nowCategory=t})):this.$http("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chinghsin-api","/products/all")).then((function(t){e.products=t.data.products,e.nowCategory=""})),this.isLoading=!1},toggleFavorite:function(t){console.log(t),console.log(t.id);var e=this.userFavorite.findIndex((function(e){return e===t.id}));-1===e?(this.userFavorite.push(t.id),this.emitter.emit("push-message",{style:"success",title:"加入成功",content:"".concat(t.title,"已加入最愛清單")}),console.log("add to favorite",this.userFavorite,t.id)):(this.userFavorite.splice(e,1),this.emitter.emit("push-message",{style:"success",title:"移除成功",content:"".concat(t.title,"已從最愛清單移除")}),console.log("have to remove",t.id)),console.log(this.userFavorite)},goToFavorite:function(){this.inFavoritePage=!0,this.getFavorite(),this.nowCategory="favorite"},getFavorite:function(){var t=this;this.favoriteProductList=[],this.userFavorite.length>0?(this.userFavorite.forEach((function(e){t.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("chinghsin-api","/product/").concat(e)).then((function(e){t.favoriteProductList.push(e.data.product)})).catch((function(t){console.log(t)}))})),this.products=this.favoriteProductList):this.products=[]}},watch:{userFavorite:{handler:function(){localStorage.setItem("userFavorite",JSON.stringify(this.userFavorite)),!0===this.inFavoritePage&&this.getFavorite()},deep:!0}},mounted:function(){this.getProducts(this.$route.query.category)}};const wt=S()(yt,[["render",l]]);e["default"]=wt},e9c4:function(t,e,c){var n=c("23e7"),r=c("da84"),o=c("d066"),i=c("2ba4"),a=c("e330"),s=c("d039"),u=r.Array,l=o("JSON","stringify"),d=a(/./.exec),b=a("".charAt),h=a("".charCodeAt),j=a("".replace),O=a(1..toString),v=/[\uD800-\uDFFF]/g,f=/^[\uD800-\uDBFF]$/,g=/^[\uDC00-\uDFFF]$/,p=function(t,e,c){var n=b(c,e-1),r=b(c,e+1);return d(f,t)&&!d(g,r)||d(g,t)&&!d(f,n)?"\\u"+O(h(t,0),16):t},m=s((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&n({target:"JSON",stat:!0,forced:m},{stringify:function(t,e,c){for(var n=0,r=arguments.length,o=u(r);n<r;n++)o[n]=arguments[n];var a=i(l,null,o);return"string"==typeof a?j(a,v,p):a}})}}]);
//# sourceMappingURL=chunk-448eb5da.49257d49.js.map